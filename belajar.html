<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Belajar — JFT Keys</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body class="page learn-page">
  <header class="site-header">
    <nav class="topnav container">
      <a href="index.html" class="brand">JFT Keys</a>
      <div class="spacer"></div>
      <a href="belajar.html?sesi=1" class="link active">Belajar</a>
      <a href="latihan.html?sesi=1" class="link">Latihan</a>
      <a href="ujian.html?sesi=1" class="link">Ujian</a>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <div class="quiz-head">
        <div style="display:flex;gap:.5rem;align-items:center;flex-wrap:wrap">
          <h1 class="quiz-title" id="pageTitle" style="margin-right:.5rem">Belajar — Sesi 1</h1>
          <label class="muted" for="sessionSelect">Ganti sesi:</label>
          <select id="sessionSelect" class="btn" style="padding:.45rem .6rem">
            <option value="1">Sesi 1</option>
            <option value="2">Sesi 2</option>
            <option value="3">Sesi 3</option>
            <option value="4">Sesi 4</option>
          </select>
          <span class="spacer"></span>
          <a id="toPractice" class="btn" href="latihan.html?sesi=1">Ke Latihan</a>
          <a id="toExam" class="btn" href="ujian.html?sesi=1">Ke Ujian</a>
        </div>
        <p class="muted" id="sessionInfo">Memuat data…</p>
      </div>

      <div id="learnList" class="learn-list">
        <!-- daftar item belajar -->
        <div class="skeleton">
          <div class="skeleton-line w-90"></div>
          <div class="skeleton-line w-80"></div>
          <div class="skeleton-line w-70"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <small>© JFT Keys</small>
    </div>
  </footer>

  <script src="assets/js/app.js"></script>
  <script src="assets/js/render.js"></script>
  <script>
    (async function init(){
      const sesi = App.getSessionFromURL() || 1;
      document.getElementById('sessionSelect').value = String(sesi);

      const data = await App.loadData();
      const sess = App.pickSession(data, sesi);
      Render.updatePageTitle('Belajar', sesi);
      Render.updateSessionLinks('toPractice','toExam', sesi);

      const info = document.getElementById('sessionInfo');
      info.textContent = `${sess.title} • ${sess.items.length} item`;

      Render.renderLearnList('learnList', sess.items);

      document.getElementById('sessionSelect').addEventListener('change', (e)=>{
        const s = Number(e.target.value);
        App.replaceURLParam('sesi', s);
        location.href = `belajar.html?sesi=${s}`;
      });
    })();
  </script>
</body>
</html>